!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pica=t()}}((function(){return function t(e,r,n){function i(o,u){if(!r[o]){if(!e[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(a)return a(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var f=r[o]={exports:{}};e[o][0].call(f.exports,(function(t){var r=e[o][1][t];return i(r||t)}),f,f.exports,t,e,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e,r){"use strict";e.exports=function(){return document.createElement("canvas")}},{}],2:[function(t,e,r){"use strict";var n=1;e.exports=function(){return n++}},{}],3:[function(t,e,r){"use strict";function n(t){this.create=t,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0}n.prototype.acquire=function(){var t,e=this;return 0!==this.available.length?t=this.available.pop():((t=this.create()).id=this.lastId++,t.release=function(){e.release(t)}),this.acquired[t.id]=t,t},n.prototype.release=function(t){delete this.acquired[t.id],t.lastUsed=Date.now(),this.available.push(t),0===this.timeoutId&&(this.timeoutId=setTimeout(this.gc.bind(this),500))},n.prototype.gc=function(){var t=Date.now();this.available=this.available.filter((function(e){return!(t-e.lastUsed>2e3&&(e.destroy(),1))})),0!==this.available.length?this.timeoutId=setTimeout(this.gc.bind(this),500):this.timeoutId=0},e.exports=n},{}],4:[function(t,e,r){"use strict";function n(t){return t<0?0:t>255?255:t}function i(t){return Math.round(t*((1<<s)-1))}function a(t,e,r,n,a){var o,u,s,f,c,l,d,g,p,v,m,w,E,b,T,_,R,x=h[t].filter,y=1/n,A=Math.min(1,n),M=h[t].win/A,j=Math.floor(2*(M+1)),U=new Int16Array((j+2)*r),I=0;for(o=0;o<r;o++){for(u=(o+.5)*y+a,s=Math.max(0,Math.floor(u-M)),c=(f=Math.min(e-1,Math.ceil(u+M)))-s+1,l=new Float32Array(c),d=new Int16Array(c),g=0,p=s,v=0;p<=f;p++,v++)g+=m=x((p+.5-u)*A),l[v]=m;for(w=0,v=0;v<l.length;v++)w+=E=l[v]/g,d[v]=i(E);for(d[r>>1]+=i(1-w),b=0;b<d.length&&0===d[b];)b++;if(b<d.length){for(T=d.length-1;T>0&&0===d[T];)T--;_=s+b,R=T-b+1,U[I++]=_,U[I++]=R,U.set(d.subarray(b,T+1),I),I+=R}else U[I++]=0,U[I++]=0}return U}function o(t,e,r,i,a,o){var u,s,h,f,c,l,d,g,p,v,m,w=0,E=0;for(p=0;p<i;p++){for(c=0,v=0;v<a;v++){for(l=o[c++],d=o[c++],g=w+4*l|0,u=s=h=f=0;d>0;d--)f=f+(m=o[c++])*t[g+3]|0,h=h+m*t[g+2]|0,s=s+m*t[g+1]|0,u=u+m*t[g]|0,g=g+4|0;e[E+3]=n(f+8192>>14),e[E+2]=n(h+8192>>14),e[E+1]=n(s+8192>>14),e[E]=n(u+8192>>14),E=E+4*i|0}E=4*(p+1)|0,w=(p+1)*r*4|0}}function u(t,e,r,i,a,o){var u,s,h,f,c,l,d,g,p,v,m,w=0,E=0;for(p=0;p<i;p++){for(c=0,v=0;v<a;v++){for(l=o[c++],d=o[c++],g=w+4*l|0,u=s=h=f=0;d>0;d--)f=f+(m=o[c++])*t[g+3]|0,h=h+m*t[g+2]|0,s=s+m*t[g+1]|0,u=u+m*t[g]|0,g=g+4|0;e[E+3]=n(f+8192>>14),e[E+2]=n(h+8192>>14),e[E+1]=n(s+8192>>14),e[E]=n(u+8192>>14),E=E+4*i|0}E=4*(p+1)|0,w=(p+1)*r*4|0}}var s=14,h=[{win:.5,filter:function(t){return t>=-.5&&t<.5?1:0}},{win:1,filter:function(t){if(t<=-1||t>=1)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*(.54+.46*Math.cos(e/1))}},{win:2,filter:function(t){if(t<=-2||t>=2)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/2)/(e/2)}},{win:3,filter:function(t){if(t<=-3||t>=3)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/3)/(e/3)}}];e.exports=function(t){var e=t.src,r=t.width,n=t.height,i=t.toWidth,s=t.toHeight,h=t.scaleX||t.toWidth/t.width,f=t.scaleY||t.toHeight/t.height,c=t.offsetX||0,l=t.offsetY||0,d=t.dest||new Uint8Array(i*s*4),g=void 0===t.quality?3:t.quality,p=t.alpha||!1;if(r<1||n<1||i<1||s<1)return[];var v=a(g,r,i,h,c),m=a(g,n,s,f,l),w=new Uint8Array(i*n*4);return o(e,w,r,n,i,v),u(w,d,n,i,s,m),p||function(t,e,r){for(var n=3,i=e*r*4|0;n<i;)t[n]=255,n=n+4|0}(d,i,s),d}},{}],5:[function(t,e,r){"use strict";function n(t,e,r){for(var n,i,a,o,u,s=e*r,h=new Uint16Array(s),f=0;f<s;f++)n=t[4*f],i=t[4*f+1],a=t[4*f+2],u=n>=i&&n>=a?n:i>=a&&i>=n?i:a,o=n<=i&&n<=a?n:i<=a&&i<=n?i:a,h[f]=257*(u+o)>>1;return h}var i=t("glur/mono16");e.exports=function(t,e,r,a,o,u){var s,h,f,c,l,d,g,p,v,m,w,E,b;if(!(0===a||o<.5)){o>2&&(o=2);var T=n(t,e,r),_=new Uint16Array(T);i(_,e,r,o);for(var R=a/100*4096+.5|0,x=257*u|0,y=e*r,A=0;A<y;A++)E=2*(T[A]-_[A]),Math.abs(E)>=x&&(s=t[b=4*A],h=t[b+1],f=t[b+2],d=257*((p=s>=h&&s>=f?s:h>=s&&h>=f?h:f)+(g=s<=h&&s<=f?s:h<=s&&h<=f?h:f))>>1,g===p?c=l=0:(l=d<=32767?4095*(p-g)/(p+g)|0:4095*(p-g)/(510-p-g)|0,c=s===p?65535*(h-f)/(6*(p-g))|0:h===p?21845+(65535*(f-s)/(6*(p-g))|0):43690+(65535*(s-h)/(6*(p-g))|0)),(d+=R*E+2048>>12)>65535?d=65535:d<0&&(d=0),0===l?s=h=f=d>>8:(v=2*d-(m=d<=32767?d*(4096+l)+2048>>12:d+((65535-d)*l+2048>>12))>>8,m>>=8,s=(w=c+21845&65535)>=43690?v:w>=32767?v+(6*(m-v)*(43690-w)+32768>>16):w>=10922?m:v+(6*(m-v)*w+32768>>16),h=(w=65535&c)>=43690?v:w>=32767?v+(6*(m-v)*(43690-w)+32768>>16):w>=10922?m:v+(6*(m-v)*w+32768>>16),f=(w=c-21845&65535)>=43690?v:w>=32767?v+(6*(m-v)*(43690-w)+32768>>16):w>=10922?m:v+(6*(m-v)*w+32768>>16)),t[b]=s,t[b+1]=h,t[b+2]=f)}},e.exports.lightness=n},{"glur/mono16":11}],6:[function(t,e,r){"use strict";function n(t){var e=Math.round(t);return Math.abs(t-e)<a?e:Math.floor(t)}function i(t){var e=Math.round(t);return Math.abs(t-e)<a?e:Math.ceil(t)}var a=1e-5;e.exports.createRegions=function(t){var e,r,a,o,u,s,h,f=t.toWidth/t.width,c=t.toHeight/t.height,l=n(t.srcTileSize*f)-2*t.destTileBorder,d=n(t.srcTileSize*c)-2*t.destTileBorder,g=[];for(o=0;o<t.toHeight;o+=d)for(a=0;a<t.toWidth;a+=l)(e=a-t.destTileBorder)<0&&(e=0),e+(u=a+l+t.destTileBorder-e)>=t.toWidth&&(u=t.toWidth-e),(r=o-t.destTileBorder)<0&&(r=0),r+(s=o+d+t.destTileBorder-r)>=t.toHeight&&(s=t.toHeight-r),h={toX:e,toY:r,toWidth:u,toHeight:s,toInnerX:a,toInnerY:o,toInnerWidth:l,toInnerHeight:d,offsetX:e/f-n(e/f),offsetY:r/c-n(r/c),scaleX:f,scaleY:c,x:n(e/f),y:n(r/c),width:i(u/f),height:i(s/c)},g.push(h);return g},e.exports.eachLimit=function(t,e,r,n){function i(e){if(!u){if(e)return u=!0,void n(e);++o===t.length?n():a<t.length&&r(t[a++],i)}}0===t.length&&n();for(var a=0,o=0,u=!1;a<e&&a<t.length;)r(t[a++],i)}},{}],7:[function(t,e,r){"use strict";e.exports=function(e){var r=t("./resize_array"),n=t("./unsharp");e.onmessage=function(t){var i=t.data;i.dest=new Uint8Array(i.toWidth*i.toHeight*4),r(i),i.unsharpAmount&&n(i.dest,i.toWidth,i.toHeight,i.unsharpAmount,i.unsharpRadius,i.unsharpThreshold),e.postMessage({output:i.dest},[i.dest.buffer])}}},{"./resize_array":4,"./unsharp":5}],8:[function(t,e,r){"use strict";var n=t("./js/resize_array"),i=t("./js/unsharp"),a=t("./js/utils").createRegions,o=t("./js/utils").eachLimit,u=t("./js/generate_id"),s=t("./js/create_canvas"),h=1024,f=3;e.exports=function(t,e,r,c){var l=e.getContext("2d",{alpha:Boolean(r.alpha)}),d=s();d.width=Math.min(h,t.width),d.height=Math.min(h,t.height);var g=d.getContext("2d",{alpha:Boolean(r.alpha)});g.globalCompositeOperation="copy";var p=a({width:t.naturalWidth||t.width,height:t.naturalHeight||t.height,srcTileSize:h,toWidth:e.width,toHeight:e.height,destTileBorder:Math.ceil(Math.max(f,2.5*r.unsharpRadius|0))});return o(p,1,(function(e,a){g.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var o=g.getImageData(0,0,e.width,e.height),u=l.createImageData(e.toWidth,e.toHeight),s={src:o.data,dest:u.data,width:e.width,height:e.height,toWidth:e.toWidth,toHeight:e.toHeight,scaleX:e.scaleX,scaleY:e.scaleY,offsetX:e.offsetX,offsetY:e.offsetY,quality:r.quality,alpha:r.alpha,unsharpAmount:r.unsharpAmount,unsharpRadius:r.unsharpRadius,unsharpThreshold:r.unsharpThreshold};n(s),r.unsharpAmount&&i(s.dest,s.toWidth,s.toHeight,s.unsharpAmount,s.unsharpRadius,s.unsharpThreshold),l.putImageData(u,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth,e.toInnerHeight),a()}),c),u()},e.exports.terminate=function(){}},{"./js/create_canvas":1,"./js/generate_id":2,"./js/resize_array":4,"./js/unsharp":5,"./js/utils":6}],9:[function(t,e,r){"use strict";var n=t("webworkify"),i=t("./js/worker.js"),a=t("./js/utils").createRegions,o=t("./js/utils").eachLimit,u=t("./js/generate_id"),s=t("./js/create_canvas"),h=t("./js/pool"),f=1024,c=3,l=!1;try{l=-1!==navigator.userAgent.indexOf("Safari")}catch(t){}var d=new h((function(){return{value:n(i),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var t=window.URL||window.webkitURL||window.mozURL||window.msURL;t&&t.revokeObjectURL&&this.value.objectURL&&t.revokeObjectURL(this.value.objectURL)}}}})),g={};e.exports=function(t,e,r,n){var i=e.getContext("2d",{alpha:Boolean(r.alpha)}),h=s();h.width=Math.min(f,t.naturalWidth||t.width),h.height=Math.min(f,t.naturalHeight||t.height);var p=h.getContext("2d",{alpha:Boolean(r.alpha)});p.globalCompositeOperation="copy";var v=a({width:t.naturalWidth||t.width,height:t.naturalHeight||t.height,srcTileSize:f,toWidth:e.width,toHeight:e.height,destTileBorder:Math.ceil(Math.max(c,2.5*r.unsharpRadius|0))}),m=1;"undefined"!=typeof navigator&&(m=navigator.hardwareConcurrency||1);var w=r._id||u();return g[w]=!0,o(v,m,(function(e,n){p.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var a={src:p.getImageData(0,0,e.width,e.height).data,width:e.width,height:e.height,toWidth:e.toWidth,toHeight:e.toHeight,scaleX:e.scaleX,scaleY:e.scaleY,offsetX:e.offsetX,offsetY:e.offsetY,quality:r.quality,alpha:r.alpha,unsharpAmount:r.unsharpAmount,unsharpRadius:r.unsharpRadius,unsharpThreshold:r.unsharpThreshold},o=d.acquire();o.value.onmessage=function(t){var r,a,u,s,h;if(o.release(),g[w])if(t.data.err)n(t.data.err);else{if(u=i.createImageData(e.toWidth,e.toHeight),s=t.data.output,(h=u.data).set)h.set(s);else for(r=0,a=s.length;r<a;r++)h[r]=s[r];l?i.putImageData(u,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth+1e-5,e.toInnerHeight+1e-5):i.putImageData(u,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth,e.toInnerHeight),n()}else n(!0)},o.value.postMessage(a,[a.src.buffer])}),(function(t){g[w]&&(delete g[w],n(t))})),w},e.exports.terminate=function(t){g[t]&&delete g[t]}},{"./js/create_canvas":1,"./js/generate_id":2,"./js/pool":3,"./js/utils":6,"./js/worker.js":7,webworkify:13}],10:[function(t,e,r){"use strict";function n(t){try{(window.console.error||window.console.log).call(window.console,t)}catch(t){}}function i(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("gl error "+e)}function a(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(n("Shader compile error: "+t.getShaderInfoLog(i)+". Source: `"+r+"`"),t.deleteShader(i),null)}function o(t,e,r){var a=t.createProgram();return t.attachShader(a,e),t.attachShader(a,r),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(n("Program linking error: "+t.getProgramInfoLog(a)),t.deleteProgram(a)),i(t),a}function u(t,e,r,n,a){var o=t.getAttribLocation(e,r);t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW),t.enableVertexAttribArray(o),t.vertexAttribPointer(o,a.elementSize,t.FLOAT,!1,0,0),i(t)}function s(t,e,r){var n=t.createTexture();return t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),i(t),n}function h(t,e,r,n){var a=function(t,e,r,n){var a=t.createTexture();return t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r,n,0,t.RGBA,t.UNSIGNED_BYTE,null),i(t),a}(t,e,r,n),o=t.getParameter(t.FRAMEBUFFER_BINDING),u=t.createFramebuffer();return t.bindFramebuffer(t.FRAMEBUFFER,u),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,a,0),i(t),{fbo:u,texture:a,oldFbo:o}}function f(t,e,r,n){var i=t+r,a=e+n;return[t,e,i,e,t,a,t,a,i,e,i,a]}function c(t,e){var r=a(t,t.VERTEX_SHADER,p["#vsh-basic"]),n=a(t,t.FRAGMENT_SHADER,function(t){function e(t){return t.toFixed(20)}for(var r=p["#fsh-lanczos1d-optimized-tpl"],n=t.direction,i=t.texW/t.destW,a=t.texH/t.destH,o="horizontal"===n?i:a,u=v[3].filter,s=v[3].win,h="horizontal"===n,f=1/t.texW,c=1/t.texH,l=h?f:c,d=2*Math.ceil(s*o),g="float total = 0.0;\ngl_FragColor = vec4(0.0);\n",m=0;m<d+1;m++){var w=m-d/2,E=u(w/o),b=l*w,T=h?0:b;g+="addPoint(vec2("+e(h?b:0)+", "+e(T)+"), "+e(E)+", total);\n"}return g+="gl_FragColor /= vec4(total);",r.replace("__CODE__",g)}(e));return o(t,r,n)}function l(t,e,r,n,a,o,s,l,d){var g=c(t,{direction:o,texW:r,texH:n,destW:s,destH:l});t.useProgram(g),function(t,e,r,n){var i=t.getUniformLocation(e,r);t.uniform1i(i,n)}(t,g,"u_image",e),function(t,e,r,n,i){var a=t.getUniformLocation(e,r);t.uniform2f(a,n,i)}(t,g,"u_resolution",s,l),u(t,g,"a_texCoord",[0,0,1,0,0,1,0,1,1,0,1,1],{elementSize:2}),u(t,g,"a_position",d?f(0,l,s,-l):f(0,0,s,l),{elementSize:2}),t.viewport(0,0,s,l);var p=h(t,a,s,l);return t.viewport(0,0,s,l),t.drawArrays(t.TRIANGLES,0,6),t.bindFramebuffer(t.FRAMEBUFFER,p.oldFbo),i(t),p}var d=t("./js/unsharp"),g=t("./js/generate_id"),p={"#vsh-basic":"precision highp float;\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n   vec2 clipSpace = a_position / u_resolution * 2.0 - 1.0;\n\n   gl_Position = vec4(clipSpace, 0, 1);\n   v_texCoord = a_texCoord;\n}\n","#fsh-lanczos1d-optimized-tpl":"precision highp float;\n\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_image;\n\n#define addPoint(offset, kv, total)   {vec2 pos = v_texCoord + offset; gl_FragColor += texture2D(u_image, pos) * kv; total += kv; }\n\nvoid main()\n{\n__CODE__\n}\n"},v=[{win:.5,filter:function(t){return t>=-.5&&t<.5?1:0}},{win:1,filter:function(t){if(t<=-1||t>=1)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*(.54+.46*Math.cos(e/1))}},{win:2,filter:function(t){if(t<=-2||t>=2)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/2)/(e/2)}},{win:3,filter:function(t){if(t<=-3||t>=3)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/3)/(e/3)}}];e.exports=function(t,e,r,i){var a,o;try{(o=document.createElement("canvas")).id="pica-webgl-temporarry-canvas",o.height=e.height,o.width=e.width,document.body.appendChild(o),a=function(t){return t.getContext("webgl")||t.getContext("experimental-webgl")}(o);var u=function(t,e,r){var n=t.naturalWidth||t.width,i=t.naturalHeight||t.height,a=e.canvas.width,o=e.canvas.height;s(e,0,t),l(e,0,n,i,1,"horizontal",a,i,!1);var u=l(e,1,a,i,2,"vertical",a,o,!0);e.flush();var h=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,h),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,u.texture,0);var f=e.checkFramebufferStatus(e.FRAMEBUFFER);if(f!==e.FRAMEBUFFER_COMPLETE)throw new Error("Bad framebuffer status: "+f);r.alpha||(e.clearColor(1,1,1,1),e.colorMask(!1,!1,!1,!0),e.clear(e.COLOR_BUFFER_BIT));var c=new Uint8Array(a*o*4);e.readPixels(0,0,a,o,e.RGBA,e.UNSIGNED_BYTE,c);var g=void 0===r.unsharpAmount?0:0|r.unsharpAmount,p=void 0===r.unsharpRadius?0:r.unsharpRadius,v=void 0===r.unsharpThreshold?0:0|r.unsharpThreshold;return g&&d(c,a,o,g,p,v),c}(t,a,r);a.finish(),document.body.removeChild(o);var h=e.getContext("2d"),f=h.createImageData(e.width,e.height);f.data.set(u),h.putImageData(f,0,0),i(null,u)}catch(t){n(t),a.finish(),document.body.removeChild(o),i(t)}return g()},e.exports.terminate=function(){}},{"./js/generate_id":2,"./js/unsharp":5}],11:[function(t,e,r){function n(t){t<.5&&(t=.5);var e=Math.exp(.527076)/t,r=Math.exp(-e),n=Math.exp(-2*e),i=(1-r)*(1-r)/(1+2*e*r-n);return a=i,o=i*(e-1)*r,u=i*(e+1)*r,s=-i*n,h=2*r,f=-n,new Float32Array([a,o,u,s,h,f,(a+o)/(1-h-f),(u+s)/(1-h-f)])}function i(t,e,r,n,i,a){var o,u,s,h,f,c,l,d,g,p,v,m,w,E;for(g=0;g<a;g++){for(l=g,d=0,h=f=(o=t[c=g*i])*n[6],v=n[0],m=n[1],w=n[4],E=n[5],p=0;p<i;p++)s=(u=t[c])*v+o*m+h*w+f*E,f=h,h=s,o=u,r[d]=h,d++,c++;for(d--,l+=a*(i-1),h=f=(o=t[--c])*n[7],u=o,v=n[2],m=n[3],p=i-1;p>=0;p--)s=u*v+o*m+h*w+f*E,f=h,h=s,o=u,u=t[c],e[l]=r[d]+h,c--,d--,l-=a}}var a,o,u,s,h,f;e.exports=function(t,e,r,a){if(a){var o=new Uint16Array(t.length),u=new Float32Array(Math.max(e,r)),s=n(a);i(t,o,u,s,e,r),i(o,t,u,s,r,e)}}},{}],12:[function(t,e,r){"use strict";function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map((function(t){return e[t]}));if("0123456789"!==n.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,o,u=n(t),s=1;s<arguments.length;s++){for(var h in r=Object(arguments[s]))i.call(r,h)&&(u[h]=r[h]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(r);for(var f=0;f<o.length;f++)a.call(r,o[f])&&(u[o[f]]=r[o[f]])}}return u}},{}],13:[function(t,e,r){var n=arguments[3],i=arguments[4],a=arguments[5],o=JSON.stringify;e.exports=function(t,e){for(var r,u=Object.keys(a),s=0,h=u.length;s<h;s++){var f=u[s],c=a[f].exports;if(c===t||c&&c.default===t){r=f;break}}if(!r){r=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var l={};for(s=0,h=u.length;s<h;s++){l[f=u[s]]=f}i[r]=[Function(["require","module","exports"],"("+t+")(self)"),l]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[r]=r,i[d]=[Function(["require"],"var f = require("+o(r)+");(f.default ? f.default : f)(self);"),g];var p={};!function t(e){for(var r in p[e]=!0,i[e][1]){var n=i[e][1][r];p[n]||t(n)}}(d);var v="("+n+")({"+Object.keys(p).map((function(t){return o(t)+":["+i[t][0]+","+o(i[t][1])+"]"})).join(",")+"},{},["+o(d)+"])",m=window.URL||window.webkitURL||window.mozURL||window.msURL,w=new Blob([v],{type:"text/javascript"});if(e&&e.bare)return w;var E=m.createObjectURL(w),b=new Worker(E);return b.objectURL=E,b}},{}],"/":[function(t,e,r){"use strict";function n(t){return"[object Function]"===function(t){return Object.prototype.toString.call(t)}(t)}var i="undefined"!=typeof window&&"Worker"in window;if(i)try{t("webworkify")((function(){})).terminate()}catch(t){i=!1}var a,o=!1;try{"undefined"!=typeof document&&"undefined"!=typeof window&&window.WebGLRenderingContext&&(((a=document.createElement("canvas")).getContext("webgl")||a.getContext("experimental-webgl"))&&(o=!0))}catch(t){}finally{a=null}var u=t("./lib/resize_js"),s=t("./lib/resize_js_ww"),h=t("./lib/resize_webgl"),f=t("./lib/js/resize_array"),c=t("./lib/js/unsharp"),l=t("object-assign");r.resizeCanvas=function t(e,a,f,c){if(n(f)&&(c=f,f={}),isNaN(f)||(f={quality:f,alpha:!1}),o||(r.WEBGL=!1),o&&r.WEBGL){r.debug("Resize canvas with WebGL");var d=h(e,a,f,(function(n){n?(r.debug("WebGL resize failed, do fallback and cancel next attempts"),r.debug(n),o=!1,t(e,a,l({},f,{_id:d}),c)):c()}));return d}return i||(r.WW=!1),i&&r.WW?(r.debug("Resize buffer in WebWorker"),s(e,a,f,c)):(r.debug("Resize buffer sync (freeze event loop)"),u(e,a,f,c))},r.resizeBuffer=function(t,e){var r={src:t.src,dest:t.dest,width:0|t.width,height:0|t.height,toWidth:0|t.toWidth,toHeight:0|t.toHeight,quality:t.quality,alpha:t.alpha,unsharpAmount:t.unsharpAmount,unsharpRadius:t.unsharpRadius,unsharpThreshold:t.unsharpThreshold};r.dest=f(r),r.unsharpAmount&&c(r.dest,r.toWidth,r.toHeight,r.unsharpAmount,r.unsharpRadius,r.unsharpThreshold),e(null,r.dest)},r.terminate=function(t){u.terminate(t),s.terminate(t),h.terminate(t)},r.WW=i,r.WEBGL=!1,r.debug=function(){}},{"./lib/js/resize_array":4,"./lib/js/unsharp":5,"./lib/resize_js":8,"./lib/resize_js_ww":9,"./lib/resize_webgl":10,"object-assign":12,webworkify:13}]},{},[])("/")}));